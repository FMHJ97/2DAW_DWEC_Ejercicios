<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejemplo Sets</title>
</head>
<body>

    <script>

        /* Los Sets o Conjuntos son elementos iteradores con la
        peculiaridad de que no recoge elementos repetidos. */

        const c1=new Set([]); // Conjunto o Set vacío.
        const c2=new Set([1,2,3,4]); // Conjunto con 4 elementos.
        const c3=new Set([1,1,3,4]); // Conjunto con 3 elementos.
        
        /* Es case sensitive, es decir, diferencia entre 
        mayúsculas y minúsculas. */
        const c4=new Set(["a","b","D","A"]);

        console.log(c1);
        console.log(c2);
        console.log(c3);
        console.log(c4);

        // Agregar elementos a un Set.
        const set1 = new Set();
        set1.add(1);
        set1.add("A");
        console.log(set1);

        // Comprobamos si aparece dicho elemento.
        const set2 = new Set([1, 2, 3]);
        console.log(set2.has(2)); // True
        console.log(set2.has(4)); // False
        
        // Borramos elementos de un Set.
        const set3 = new Set([1, 2, 3]);
        console.log(set3.delete(3)); // true
        console.log(set3.delete(4)); // false

        // Vaciar un Set.
        const set4 = new Set([1, 2, 3]);
        set4.clear();
        console.log(set4.size); // 0

        // Convertir de Set a Array.
        const s1 = new Set([1, 2, [3, 4]]);
        console.log(s1.size); // 3 (Contiene 3 elementos)
        console.log(s1.constructor.name); // "Set"
        const a1 = [...s1]; // copia del cojunto en un array y que al modificar el array no se modifique el conjunto original
        console.log(a1.constructor.name); // "Array"
        console.log(a1); // [1, 2, [3, 4]]

        /* Si queremos una copia del cojunto en un array y que al modificar el array
        no se modifique el conjunto original, podemos utilizar la función structuredClone() */
        const set01 = new Set([1, 2, [3, 4]]);
        const array01 = [...set01];
        const clonedArray = [...structuredClone(set01)];

        // Convertir de Array a Set.
        const a2 = [5, 4, 3, 3, 4];
        const s2 = new Set(a2);
        console.log(s2); // Set({ 5, 4, 3 });

        /* WeakSet: Son un tipo especial de conjuntos (set) que no permite 
        introducir elementos de datos primitivos. */
        const s3 = new Set([1, "A", true]); // OK
        const s4 = new Set([{ nombre: "Miguel" }, [1, 2]]); // OK

        const ws1 = new WeakSet([1, "A", true]); // ERROR: Uncaught TypeError: Invalid value used in weak set
        const ws2 = new WeakSet([{ nombre: "Miguel" }, [1, 2]]); // OK

    </script>
    
</body>
</html>